<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Category Offer Management</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f8f9fa;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    .offer-table {
      width: 100%;
      border-collapse: collapse;
      background-color: #fff;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .offer-table th,
    .offer-table td {
      padding: 12px 16px;
      border-bottom: 1px solid #e2e6ea;
      text-align: left;
    }

    .offer-table th {
      background-color: #343a40;
      color: #fff;
    }

    .offer-table tr:hover {
      background-color: #f1f3f5;
    }

    .actions button {
      padding: 6px 12px;
      margin-right: 5px;
      border: none;
      cursor: pointer;
      border-radius: 4px;
    }

    .actions .edit {
      background-color: #ffc107;
      color: #000;
    }

    .actions .delete {
      background-color: #dc3545;
      color: #fff;
    }

    .actions .toggle {
      background-color: #28a745;
      color: #fff;
    }
  </style>
</head>
<body>
  <h1>Category Offer Management</h1>

  <table class="offer-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Offer Name</th>
        <th>Discount (%)</th>
        <th>Category</th>
        <th>Start</th>
        <th>End</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% if (offers && offers.length > 0) { %>
        <% offers.forEach((offer, index) => { %>
          <tr>
            <td><%= index + 1 %></td>
            <td><%= offer.name %></td>
            <td><%= offer.discountPercentage %></td>
            <td><%= offer.categoryName || 'â€”' %></td>
            <td><%= offer.startDate.toDateString() %></td>
            <td><%= offer.endDate.toDateString() %></td>
            <td><%= offer.isActive ? 'Active' : 'Inactive' %></td>
            <td class="actions">
              <button class="edit" onclick="editOffer('<%= offer._id %>')">Edit</button>
              <button class="toggle" onclick="toggleStatus('<%= offer._id %>')">
                <%= offer.isActive ? 'Deactivate' : 'Activate' %>
              </button>
              <button class="delete" onclick="deleteOffer('<%= offer._id %>')">Delete</button>
            </td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr>
          <td colspan="8" style="text-align: center;">No offers available</td>
        </tr>
      <% } %>
    </tbody>
  </table>

  <script>
    function editOffer(id) {
      window.location.href = `/admin/offer/categories/edit/${id}`;
    }

    function toggleStatus(id) {
      if (confirm("Toggle this offer's status?")) {
        // Replace with actual logic (AJAX or form submission)
        console.log("Toggling status for:", id);
      }
    }

    function deleteOffer(id) {
      if (confirm("Are you sure you want to delete this offer?")) {
        // Replace with actual logic (AJAX or form submission)
        console.log("Deleting offer:", id);
      }
    }
  </script>
</body>
</html>
